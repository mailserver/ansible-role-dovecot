service imap-login {
  # TODO: Disable IMAP without encryption
  inet_listener imap {
    address = "{{ _dovecot_config.listen | join(',') }}"
    port = 143
  }
  inet_listener imaps {
    port = 993
  }
}

service lmtp {
 unix_listener {{ _dovecot_config.lmtp_socket.path }} {
   mode = 0660
   user = {{ _dovecot_config.lmtp_socket.owner }} 
   group = {{ _dovecot_config.lmtp_socket.group }} 
  }
}

service imap {

}

# TODO: What is this for?
service auth {
  
  # Postfix SASL
  unix_listener /var/spool/postfix/private/auth {
    mode = 0660
    user = postfix
    group = postfix
  }

  unix_listener auth-userdb {

  }

}

service auth-worker {
 user = $default_internal_user
}

service managesieve-login {
  inet_listener sieve {
    port = 4190
  }
  service_count = 1
}

service managesieve {
  process_limit = 1024
}
