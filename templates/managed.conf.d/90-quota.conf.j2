plugin {
	quota = maildir:User quota
	# Allow unlimited storage by default
	# `quota_rule` is overriden by userdb and passdb queries
	quota_rule = *:storage=0

	quota_warning = storage=95%% quota-warning 95 %u
  	quota_warning2 = storage=80%% quota-warning 80 %u
}

service quota-warning {
  executable = script {{_dovecot_config.config_dir}}/dovecot-quota-warning.py
  # use some unprivileged user for executing the quota warnings
  user = {{ _dovecot_config.vmail.user }} 
  unix_listener quota-warning {
  	user = {{ _dovecot_config.vmail.user }} 
  	group = {{ _dovecot_config.vmail.group }}
  	mode = 0660
  }
}

